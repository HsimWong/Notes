## 操作系統發展歷史
**推动操作系统发展的主要动力**
- 不断提高资源利用率
- 方便用户的使用
- 硬件不断更新
- 计算机体系结构的不断发展

**1. 无操作系统时代**
特点：使用真空管和插件板，人工操作
**用户独占全机器**、**CPU等待人工操作**

**单道批处理系统（第二代计算机（1955-1965））**
- 目标：减少CPU时间的浪费
- 作业：程序或者程序集
【作业控制语言JCL】：用来控制作业的执行，主要用于科学与工程计算。
- 缺点：CPU利用率低下，内存利用率低，有安全问题

**多道批处理系统（第三代）**
特点：增加了及地址寄存器和界限寄存器，提供多道程序设计
**缺點：**響應時間無法確定，不同的调度算法有不同的结果（交互式应用和批处理应用对响应时间有不同的需求
**分时系统**
每个用户有一个终端，n个用户同时申请任务，每个用户有$\frac{1}{n}$有效的处理器速度
**实时系统**
使用情况：对处理器操作或者数据流动有严格的时间要求
- 硬件实时系统：保证关键实时任务暗示开始或者按时完成
- 软件实时系统：关键实时任务的优先级高于其他任务的优先级。



## 操作系统基本特征
1. 并发
	- 并行：两个时间同一时刻发生
	- 并发：两个时间在同一个时间时间间隔发生
2. 共享(Sharing)
	互斥的共享方式
	同时访问方式
3. 虚拟
	虚拟机
	虚拟内存
4. 异步性（Asynchronism）
	内存中程序什么时候执行、暂停，需要多少时间完成都是不可知的

## 操作系统设计
设计和实现操作系统已经有一些事实证明可行的方法
1. OS内部方法
2. 一开始要定义目标
	1. 系统目标
	2. 用户目标
3. 受到硬件的影响很大

## 策略和机制分离的例子：计算机中CPU可能被一个任务长期霸占
- timer时常设置

## 操作系统结构
1. 整体式结构（早期使用）没怎么划分结构
- ms-dos:没有被仔细地划分模块
- 传统Unix：受到硬件的限制，而新版的unix可以更好地使用高级硬件
2. 层次式结构
- 优点：模块化
- 缺点：对层次的定义并且相对效率较差
*OS/2*
3. 微内核结构：将原本属于操作系统内核的功能放到内核的外部，使得内核成为一个微内核
- 操作系统的微内核之外的进程是服务器进程；而用户进程是客户进程。
- 微内核实现消息的传递
**易于维护、扩充**
4. 虚拟机结构
虚拟机监控器运行在硬件系统上，提供多道程序功能
虚拟机是硬件的完全拷贝
- 优点
	1. 提供安全层面
	2. 允许进行系统开发不必中断正常的操作系统


## 进程：正在进行的程序
程序：琴谱
进程：演奏的过程
运作结束，进程结束。程序是被动的实体，进程是活动的实体
进程可以被中断，但是需要被记录下来（期间IO有开销）
**可重入程序**：可以被多个程序同事调用的程序
它是纯代码的，自身不会改变。调用它的程序提供工作区，因此可充入地程序可以同事被几个程序调用。
- 在多到程序设计中，编译程序是可重入的程序。它可以同时编译若干个程序。
$\therefore$同一个程序在处理不同的数据是可以构成不同的进程

### 三状态运行模型
就绪、运行、等待

### 五状态进程模型
新状态、中止状态的加入

**问题：内存中所有进程都在等待状态怎么办**
在等待过程中挑选IO进程（victim）挪入硬盘（挂起）
这样一来，可以有新进程进入内存

##进程实体：一个进程由什么组成
**进程映像**程序、数据、堆栈、进程控制块：用于记录进程各种属性
**进程控制块的内容**
1. 进程标识
	1. 进程的ID
	2. 创建这个进程的进程ID
	3. 用户ID
2. 进程状态信息
	1. 用户可见寄存器
	2. 控制和状态寄存器
	3. 栈指针
3. 进程控制信息
	1. 调度和状态信息
	2. 数据结构
	3. 进程间通讯
	4. 进程特权
	5. 存储管理
	6. 资源的所有权和使用

## 进程控制块实现
为了实现进程模型，操作系统维护着一张表格（结构数组）成为进程表。
每一个进程占用一个表项，也就是每个进程的进程控制块PCB

## 调度队列
进程本身不排队，PCB排队
调度程序：
- 短期调度：把就绪队列中选择进程到CPU上边执行（执行频率高）
- 长期调度：挑选新进程进入内存。
	- IO为主
	- CPU为主
	执行频率低（几分钟一次），（有些系统根本不用这种调度），考物理限制和自然人用户的自我调整
